<html>
<head>
<title>Cannot assign requested address [99]</title>
<meta http-equiv=Content-Type content="text/html; charset=gbk">
<link rel="stylesheet" href="../../public/css/Word2Chm.css" type="text/css" />
<link rel="stylesheet" href="../../public/css/default.css" type="text/css" />
<link rel="stylesheet" href="../../public/css/noframe.css" type="text/css" />
<link rel="stylesheet" href="../../public/css/bootstrap.css" type="text/css" />
<link rel="stylesheet" href="../../public/styles/shThemeDefault.css" type="text/css" />
<script type="text/javascript" src="../../public/scripts/shCore.js"></script>
<script type="text/javascript" src="../../public/scripts/shBrushPhp.js"></script>
<script type="text/javascript">
	SyntaxHighlighter.defaults['gutter'] = false;
	SyntaxHighlighter.defaults['toolbar'] = false;
	SyntaxHighlighter.all();
</script>
</head>
<body>
    <div class="wiki_content">
        <article>
            <h1>Cannot assign requested address [99]</h1>
            <p>客户端连接时出现</p>
            <pre class="brush: php;">Error: Cannot assign requested address [99]
</pre>
            <p>此错误是指无法分配本地端口。每一个socket客户端，系统都要分配一个本地端口。当一台机器存在大量客户端socket时，本地端口可能会不够用，这时再发起网络请求就会报
                #99 错误。</p>
            <p>相关内核参数是：</p>
            <pre class="brush: php;">net.ipv4.ip_local_port_range = 20000 65000
</pre>
            <h2>启用快速回收</h2>
            <p>快速回收可以加速local port的回收，在短连接的服务中需要开启此参数</p>
            <pre class="brush: php;">net.ipv4.tcp_tw_recycle = 1
</pre>
        </article>
    </div>
</body>
</html>
