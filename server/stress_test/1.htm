<html class="translated-ltr"><head>
    <title>Performance comparison of Nginx/Golang/Swoole/Node.js</title>
    <meta http-equiv="Content-Type" content="text/html; charset=gbk">
    <link rel="stylesheet" href="../../public/css/Word2Chm.css" type="text/css">
    <link rel="stylesheet" href="../../public/css/default.css" type="text/css">
    <link rel="stylesheet" href="../../public/css/noframe.css" type="text/css">
    <link rel="stylesheet" href="../../public/css/bootstrap.css" type="text/css">
    <link rel="stylesheet" href="../../public/styles/shThemeDefault.css" type="text/css">
    <script type="text/javascript" src="../../public/scripts/shCore.js"></script>
    <script type="text/javascript" src="../../public/scripts/shBrushPhp.js"></script>
    <script type="text/javascript">
        SyntaxHighlighter.defaults['gutter'] = false;
        SyntaxHighlighter.defaults['toolbar'] = false;
        SyntaxHighlighter.all();
    </script>
    <link type="text/css" rel="stylesheet" charset="UTF-8" href="https://translate.googleapis.com/translate_static/css/translateelement.css"></head>
    <body>
        <div class="wiki_content">
            <article>
                <h1><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Performance comparison of Nginx/Golang/Swoole/Node.js</font></font></h1>
                
                <p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The http server of nginx swoole node.js golang is separately measured by the ab tool, and the result is observed. </font><font style="vertical-align: inherit;">The web server is outputting a line of It work! The hardware environment is an 8G/4 core Core I5CPU notebook, the model is Thinkpad T430.</font></font></p>
                <div><div id="highlighter_254034" class="syntaxhighlighter nogutter  php"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php plain">Nginx&nbsp;&nbsp; ab -c 100 -n 100000 http:</code><code class="php comments">//localhost/index.html</code></div><div class="line number2 index1 alt1"><code class="php plain">Swoole&nbsp; ab -c 100 -n 100000 http:</code><code class="php comments">//127.0.0.1:8848/</code></div><div class="line number3 index2 alt2"><code class="php plain">Node.js ab -c 100 -n 100000 http:</code><code class="php comments">//127.0.0.1:8080/</code></div><div class="line number4 index3 alt1"><code class="php plain">Golang&nbsp; ab -c 100 -n 100000 http:</code><code class="php comments">//127.0.0.1:8080/</code></div></div></td></tr></tbody></table></div></div>
                <p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The software version used in this test is as follows:</font></font></p>
                <div><div id="highlighter_303753" class="syntaxhighlighter nogutter  php"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php plain">nginx version: nginx/1.2.6 (Ubuntu)</code></div><div class="line number2 index1 alt1"><code class="php plain">go version go1.1.1 linux/amd64</code></div><div class="line number3 index2 alt2"><code class="php plain">swoole-1.5.4</code></div><div class="line number4 index3 alt1"><code class="php plain">node.js-0.11.3-pre</code></div></div></td></tr></tbody></table></div></div>
                <p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The code is in the ./code directory.</font></font></p>
                <h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">QPS comparison</font></font></h2>
                <div><div id="highlighter_321901" class="syntaxhighlighter nogutter  php"><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php plain">Nginx:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Requests per second:&nbsp;&nbsp;&nbsp; 23770.74 [#/sec] (mean)</code></div><div class="line number2 index1 alt1"><code class="php plain">Golang:&nbsp;&nbsp;&nbsp;&nbsp; Requests per second:&nbsp;&nbsp;&nbsp; 21807.00 [#/sec] (mean)</code></div><div class="line number3 index2 alt2"><code class="php plain">Swoole:&nbsp;&nbsp;&nbsp;&nbsp; Requests per second:&nbsp;&nbsp;&nbsp; 19711.22 [#/sec] (mean)</code></div><div class="line number4 index3 alt1"><code class="php plain">Node.js:&nbsp;&nbsp;&nbsp; Requests per second:&nbsp;&nbsp;&nbsp; 6680.53 [#/sec] (mean)</code></div></div></td></tr></tbody></table></div></div>
                <h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Memory usage comparison</font></font></h2>
                <p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">After Golang runs multiple pressure tests, the memory rises from 2920K to 5580K, and then the pressure measurement will not rise.</font></font></p>
                <p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">After Node.js has been running for many times, the memory has been rising, and there is a slight memory leak. </font><font style="vertical-align: inherit;">From the beginning of the 5930K, to the last 6060K.</font></font></p>
                <p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nginx's 4 worker processes, the memory footprint has been stable at 820K.</font></font></p>
                <p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">The memory usage of the main process of Swoole has been stable at 3200K, and there is no increase in the memory usage of multiple pressure tests. </font><font style="vertical-align: inherit;">The memory of the worker process has increased slightly.</font></font></p>
                <p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">By setting the Swoole max_request parameter, the life cycle of the worker process is controllable, and all memory is automatically reclaimed after the end of the life cycle, so minor memory leaks are not a problem.</font></font></p>
                <h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">TCP long connection maintenance</font></font></h2>
                <p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nginx, Golang, Swoole, and node.js all use epoll/kqueue as the event polling mechanism. </font><font style="vertical-align: inherit;">How long a connection is maintained has nothing to do with the program code itself, depending on the memory size of the operating system.</font></font></p>
                <h2><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Result evaluation</font></font></h2>
                <p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Nginx, Golang, and Swoole are multi-threaded Reactors that take full advantage of multicore, so the score is several times that of node.js. </font><font style="vertical-align: inherit;">The PHP code in Swoole needs to be compiled into opcode for execution, and each opcode is a function call. </font><font style="vertical-align: inherit;">Language execution efficiency is worse than C language (Nginx), Golang compiled language. </font><font style="vertical-align: inherit;">The http module of Node.js is not multi-threaded and cannot use multi-core, and the result is the worst. </font><font style="vertical-align: inherit;">This is not to say that node.js has poor performance. Using a third-party node extension cluster can also turn node.js into multiple processes.</font></font></p>
                <blockquote>
                    <p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">In the latest version of swoole-1.7.6+, the benchmark stress test swoole has surpassed Golang for both short and long connections. </font><font style="vertical-align: inherit;">The performance test report will be re-released after the next release.</font></font></p>
                </blockquote>
            </article>
            
        </div><div id="goog-gt-tt" class="skiptranslate" dir="ltr"><div style="padding: 8px;"><div><div class="logo"><img src="https://www.gstatic.com/images/branding/product/1x/translate_24dp.png" width="20" height="20" alt="Google Translate"></div></div></div><div class="top" style="padding: 8px; float: left; width: 100%;"><h1 class="title gray">Original text</h1></div><div class="middle" style="padding: 8px;"><div class="original-text"></div></div><div class="bottom" style="padding: 8px;"><div class="activity-links"><span class="activity-link">Contribute a better translation</span><span class="activity-link"></span></div><div class="started-activity-container"><hr style="color: #CCC; background-color: #CCC; height: 1px; border: none;"><div class="activity-root"></div></div></div><div class="status-message" style="display: none;"></div></div>
    
    
    <div class="goog-te-spinner-pos"><div class="goog-te-spinner-animation"><svg xmlns="http://www.w3.org/2000/svg" class="goog-te-spinner" width="96px" height="96px" viewBox="0 0 66 66"><circle class="goog-te-spinner-path" fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30"></circle></svg></div></div></body></html>